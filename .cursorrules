# Cursor AI Rules for Kaizen Bot

## Project Context

You are working on **Kaizen** - a Telegram accountability bot that helps users achieve daily goals through group-based social accountability.

**Project Name:** Kaizen (æ”¹å–„ - Continuous Improvement)
**Tech Stack:** Node.js 20+, TypeScript, grammy (Telegram bot framework), Turso (libSQL), node-cron

## Current Status

- âœ… Checkpoint 1: Foundation Complete
- ğŸ”¨ Working on: Adding Japanese themes and interactive features
- ğŸ“ Location: `/Users/sarthiborkar/Build/TG/Kaizen/accountability-bot/`

## Key Project Files

- `CLAUDE.md` - Complete project context, checkpoint status, and session log
- `accountability-bot-prd.md` - Full Product Requirements Document
- `accountability-bot/` - Main bot codebase

## Development Guidelines

### Code Style
- TypeScript with strict mode
- ES2022 modules (use `.js` extensions in imports)
- Prefer async/await over promises
- Use descriptive variable names
- Add comments for complex logic

### Bot Architecture
```
src/
â”œâ”€â”€ index.ts              # Bot entry point
â”œâ”€â”€ config.ts             # Environment config
â”œâ”€â”€ db/                   # Database layer (Turso)
â”œâ”€â”€ commands/             # Command handlers
â”œâ”€â”€ handlers/             # Event handlers
â””â”€â”€ utils/                # Helpers and utilities
```

### Important Patterns

1. **Database Queries**: Always use parameterized queries in `src/db/queries.ts`
2. **Error Handling**: Wrap async operations in try-catch, log errors, reply to user
3. **User State**: Use in-memory Maps for conversational state (userStates)
4. **Inline Keyboards**: Build keyboards in `src/utils/keyboards.ts`
5. **Messages**: Store templates in `src/utils/messages.ts`

### Japanese Theme Guidelines

When adding Japanese elements:
- Use concepts like Kaizen (æ”¹å–„), Wabi-Sabi (ä¾˜å¯‚), Ikigai (ç”Ÿãç”²æ–)
- Include seasonal themes (å››å­£): Spring ğŸŒ¸, Summer ğŸŒ¿, Autumn ğŸ‚, Winter â„ï¸
- Rank system inspired by martial arts belts or Japanese elements (äº”è¡Œ)
- Keep it subtle and tasteful, not overwhelming
- Balance Western readability with Japanese aesthetics

### User Instructions to Follow

From CLAUDE.md:
- **No git operations** - User handles all git changes
- **No pushing to GitHub** - User explicitly said not to push
- **Let user know what's needed** - Like API keys, tokens, manual setup
- **Follow checkpoint-based development** - See CLAUDE.md for current checkpoint

### Current Features

âœ… Implemented:
- `/start` - Onboarding with commitment and reminder time
- `/checkin` - Daily check-in (yes/no)
- `/view` - Progress viewing (last 7 days)
- `/stats` - Statistics with streaks and success rate
- Automated reminders (8am, 6pm, 8pm, 10pm)

ğŸš§ Not Yet Implemented:
- Group creation (`/creategroup`)
- Group joining (`/joingroup`)
- Group chat integration
- Japanese visual themes
- Rank/belt system
- Enhanced check-in options

### Environment Variables

Required in `.env`:
```
BOT_TOKEN=              # From @BotFather
TURSO_DATABASE_URL=     # From Turso CLI
TURSO_AUTH_TOKEN=       # From Turso CLI
```

### Testing

To test the bot:
```bash
cd accountability-bot
npm run dev
```

For database schema updates:
```bash
npm run db:push
```

### Optimization Principles

Before implementing anything, ask:
1. Is there a simpler way?
2. Can Telegram's native features handle this?
3. Does this add user value proportional to complexity?

**Core Philosophy:** Simple group accountability > feature-rich solo tracking

### Common Pitfalls to Avoid

âŒ Don't create files without reading them first
âŒ Don't do git operations (user handles this)
âŒ Don't overcomplicate - keep it simple
âŒ Don't ignore user's explicit instructions in CLAUDE.md

âœ… Do read CLAUDE.md before starting work
âœ… Do follow checkpoint-based development
âœ… Do ask for clarification when unclear
âœ… Do prioritize user experience over features

### Next Steps

See CLAUDE.md "What's Next" section for current roadmap.

Current focus: Adding Japanese themes and interactive features to make the bot more engaging.

---

**Remember:** This is a learning project following a checkpoint-based approach. Keep code clean, well-documented, and maintainable.
